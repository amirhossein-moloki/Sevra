# نقشه راه فنی و اجرایی پروژه Sevra (Technical Roadmap)

این سند جایگزین `todo.md` قبلی شده و شامل وظایف دقیق فنی برای تکمیل و بهینه‌سازی پروژه است.

---

## ۱. توسعه بک‌اند و منطق کسب‌وکار (Backend & Business Logic)

### ۱.۱. نهایی‌سازی سرویس پیامک (SMS Integration)
- **فایل:** `src/modules/notifications/sms.service.ts`
- **توضیح:** در حال حاضر سیستم در حالت Mock عمل می‌کند. باید اطمینان حاصل شود که متغیرهای محیطی `SMSIR_API_KEY` و `SMSIR_LINE_NUMBER` در محیط Production تنظیم شده‌اند.
- **خروجی:** ارسال واقعی پیامک در محیط تست/پروداکشن و ثبت خطاها در صورت شکست ارسال.

### ۱.۲. بازنویسی الگوریتم درخواستی (Availability Algorithm) ✅
- **توضیح:** الگوریتم **Interval Arithmetic** پیاده‌سازی شده است.
- **وضعیت:** تکمیل شده.

### ۱.۳. تکمیل جریان مالی پورسانت‌ها (Commissions Payment Flow) ✅
- **توضیح:** متد `payCommission` و مسیرهای مربوطه پیاده‌سازی شده‌اند.
- **وضعیت:** تکمیل شده.

---

## ۲. دیتابیس و زیرساخت (Database & Infrastructure)

### ۲.۱. انتقال لایه میانی به Redis ✅
- **توضیح:** لایه Idempotency و Rate Limiting به Redis منتقل شد.
- **وضعیت:** تکمیل شده.

### ۲.۲. بهینه‌سازی کوئری‌های تحلیلی (Analytics Optimization) ✅
- **توضیح:** جداول تجمعی (Summary Tables) پیاده‌سازی و یکپارچه شده‌اند.
- **وضعیت:** تکمیل شده.

---

## ۳. کیفیت، تست و پایداری (QA & Stability)

### ۳.۱. افزایش پوشش تست (Test Coverage)
- **توضیح:** تمرکز بر تست‌های Integration برای جریان‌های پیچیده.
- **هدف:** رسیدن به پوشش ۸۰ درصدی.

### ۳.۲. مانیتورینگ و خطاگیری (Observability) ✅
- **توضیح:** Sentry به صورت کامل پیکربندی و در `app.ts` یکپارچه شده است.
- **وضعیت:** تکمیل شده.

---

## ۴. بازآفرینی و پاکسازی (Refactor & Cleanup)

### ۴.۱. استانداردسازی پاسخ‌های API ✅
- **توضیح:** متدهای `res.ok`, `res.created` و غیره در `response.ts` پیاده‌سازی و در کنترلرها استفاده شده‌اند.
- **وضعیت:** تکمیل شده.

### ۴.۲. تکمیل مستندات Swagger ✅
- **توضیح:** فایل `openapi.yaml` شامل جزئیات Error Codeها و تمامی ماژول‌ها تکمیل شده است.
- **وضعیت:** تکمیل شده.

---

## ۵. اولویت‌بندی اجرایی (Priority Roadmap - Updated)

1.  **بالا:** نهایی‌سازی سرویس پیامک و اتصال به پنل واقعی.
2.  **متوسط:** افزایش پوشش تست‌های Integration.
3.  **متوسط:** بهبود UI ویرایشگر صفحات (CMS) از Vanilla JS به یک فریمورک مدرن (در آینده).
